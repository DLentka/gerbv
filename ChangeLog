2002-05-02  Stefan Petersen  <spe@stacken.kth.se>

	* src/draw.c: Now ovals are ovals and not ellypses.
	  Closes bug 548099.
	* HACKING, AUTHORS, CONTRIBUTORS: Updated with more authors
	  and contributors. Also extended HACKING to include ChangeLog
	  and code format.
	* src/gerbv.c: Autoscale is more correct, though not completely
	  perfect. Closes bug 550795.
	

2002-04-29  Anders Eriksson  <anders@faldor.umunet.org>

	* src/gerbv.c: Improved zoom. Now zooming around image center when
	zooming from menu and around mouse pointer when zooming using the
	mouse. There seems to be some (small) rounding error in the
	centering code, but it is very small. Closes 548128.

2002-04-27 Stefan Petersen (spe@stacken.kth.se)

	* src/gerbv.c: Number constants replaced with an enumeration
	  type. Also error in zooming comments fixed.
	* man/gerbv.1.in: Added blurb about zooming.
	* src/gerber.c: Bug 549602 fixed so format statements are
	  completely handled.


2002-04-27 Stefan Petersen (spe@stacken.kth.se)

	* src/gerbv.c: Changed name for all *open* functions to 
	  *load*. Implemented "unload file" in right-click popup,
	  which closes feature req. 548124.
	

2002-04-24 Stefan Petersen (spe@stacken.kth.se)

	* src/gerb_file.c: Fixed bug causing segfault when opening
	  empty file (bug 548578).

	
2002-04-24 Stefan Petersen (spe@stacken.kth.se)

	* man/gerbv.1: Removed.
	* man/gerbv.1.in: Created, so configure can add version of 
	  gerbv automagically. Also added blurb about right-click thing.
	* configure.in: man/gerbv.1 is created from man/gerbv.1.in.
	

2002-04-24 Stefan Petersen (spe@stacken.kth.se)

	* example/orcad/*: Added after submission from and with 
	  permission from Dino Ghilardi.


2002-04-10 Stefan Petersen (spe@stacken.kth.se)

	* src/gerber.c: Fixed mq arcs so circles are circles and
	  and width/height are correctly calculated. Closes bug
	  #541089. Hopefully.

	
2002-04-09 Stefan Petersen (spe@stacken.kth.se)

	* src/gerber.c: Fixed draw direction of arcs reported in
	  bug #541089. Not drawn D3 and VR1, and wrong size on some
	  transistors, still open.
	

2002-04-03 Stefan Petersen (spe@stacken.kth.se)

	* src/gerber.c, src/gerber.h: Fixed some numerical
	  constants in verify code.
	

2002-04-03 Stefan Petersen (spe@stacken.kth.se)

	* src/gerbv.c: Added color selection on layers.
	* TODO: Added zooming and gerber layers.

	
2002-02-10 Stefan Petersen (spe@stacken.kth.se)

	* src/draw.c: Added inclusion of string.h as pointed out by 
	  Dan McMahill.
	

-- Release 0.0.7 --	

	
2002-02-03 Stefan Petersen (spe@stacken.kth.se)

	* src/draw.c: Fixed bugs in drawing primitive 6 and 7 after
	  verification. The last primitives...
	* example/am-test/am-test.gbx: The verification suite for 
	  aperture macros.
	
	
2002-01-06 Stefan Petersen (spe@stacken.kth.se)

	* src/amacro.c: Parser handles negative immediate values.
	* src/draw.c: Load of minor bugfixes after verification like 
	  rotate points in the other direction, line wiidths constant,
	  wrong indeces.
	* src/gerber.c: Rewrote parse_aperture_defintion to handle 
	  aperture defintions without parameters.
	

2002-01-06 Stefan Petersen (spe@stacken.kth.se)

	* src/draw.c: All primitive macros are implemented (though not
	  completely) and passed the MS-test; they compile. Now it's 
	  verify, verify and verify.

	
2001-12-31 Stefan Petersen (spe@stacken.kth.se)

	* src/draw.c: Started to add functions to be able to draw
	  aperture macros too. Some aperture macro primitives are 
	  half way implemented, so the examples in the distribution
	  should work. Though not 100% properly.
	
	
2001-12-30 Stefan Petersen (spe@stacken.kth.se)

        * src/amacro.[hc]: Added, even though I haven't executed 
          an aperture macro program yet. But parsing seems stable.
        * src/gerb_image.[hc], gerber.c, src/Makefile.am: Calls 
          and keeps track of parsing of aperture macros.
        * doc/aperturemacro.txt: simple text on the "program code"
          generated when parsing aperture macros.


2001-12-29 Andreas Andersson (e92_aan@e.kth.se)

	* src/gerb_file.c:
	  Fixed gerb_fgetstring() to not write after the end of the
	  allocated array.
	* src/gerber.c:
	  Removed small memory leak in parse_aperture_definition()


2001-12-29 Andreas Andersson (e92_aan@e.kth.se)

	* src/drill.c:
	  Autodetection routine changed back to original style to allow
	  special cases needed with output from some CAD systems.
	* src/gerb_file.c:
	  Error check for mmap() added to stop gerbv from segdumping
	  when trying to open a directory instead of a file.


2001-12-29 Stefan Petersen (spe@stacken.kth.se)

	* src/gerb_file.[hc], src/gerber.c: Added function 
	  gerb_fgetstring and used it.

	
-- Release 0.0.6 --	

	
2001-12-14 Stefan Petersen (spe@stacken.kth.se)

	* src/draw.c : Removed gdk_gc_set_line_attribute when drawing
	  a point.
	* src/gerbv.c: Added autoscaling and autocentering, both as
	  a menu option (Zoom/Fit) and when loading a file.

	
2001-12-11 Stefan Petersen (spe@stacken.kth.se)

	* src/gerbv.c : Removed prelighting on buttons and changed
	  the "random function" creating colors. Also fixed "clear 
	  all" remaining after the pan speedup rewrite.

	
2001-12-10 Stefan Petersen (spe@stacken.kth.se)

	* src/gerbv.c : Forgot to check if we had any pixmap to draw.

	
2001-12-09 Stefan Petersen (spe@stacken.kth.se)

	* src/gerber.c: Fixed small bug in min/max calculation
	  which caused big problems.
	* src/gerbv.c: Major rewrite of panning code giving major
	  improvements in screen update speed.
	

2001-12-07 Stefan Petersen (spe@stacken.kth.se)

	* src/draw.[hc], src/gerbv.c : Pseudo optimized drawing.
	* src/gerb_file.c, src/gerbv.c: Fixed bug causing segfault
	  when file didn't exist (oops) and pushed error messages
	  out of gerb_file.c. And if a file (of many) given at 
	  commandline doesn't exist, the next file is tried instead 
	  of halting.

	
2001-12-06 Stefan Petersen (spe@stacken.kth.se)

	* src/drill.c, src/gerb_image.c, src/gerber.c, src/gerbv.c:
	  Exchanged bzero with memset for further portability.
	* scheme/Makefile.am: gerb-debug.scm gets installed too.
	

2001-12-06 Andreas Andersson (e92_aan@e.kth.se)

	* src/drill.[hc]:
	  Very minor change to allow tool number 0.


2001-12-03 Stefan Petersen (spe@stacken.kth.se)

	* src/Makefile.am, src/color.c, src/gerber.c, src/scm_gerber.c:
	  Turned on -Wall and cleaned up after it.

	
2001-12-03 Stefan Petersen (spe@stacken.kth.se)

	* src/drill.h, src/gerber.h, src/gerbv.c:
	  Fixed bug caused by last minute namechange of 
	  gerb_file.[hc].
	* src/gerb_file.[hc]: Added functions gerb_fgetint and
	  gerb_fgetdouble.
	* src/drill.c, src/gerber.c: Utilize the new file read
	  functions.
	
	
2001-12-02 Stefan Petersen (spe@stacken.kth.se)

	* src/gerb_file.[hc], src/drill.[hc], src/gerber.[hc], gerbv.c:
	  Changed method of file IO from fgetc to mmap. Speed increase 
	  up to 3 times noted (loading all of jj's file at ones).

	
2001-12-02 Stefan Petersen (spe@stacken.kth.se)

	* src/drill.c: drill_file_p recoded so it seems to work better.
	* src/gerbv.c: Removed and cleaned up "open file" code.
	* src/gerbv.c, src/color.c, src/color.h: Fixed the whole mess
	  with colors. Now colors doesn't set any limits on how many files
	  you can load. It also checks that you don't give too many files
	  to the program.
	

2001-12-02 Andreas Andersson (e92_aan@e.kth.se)

	* src/gerbv.c:
	  Changed radiobuttons to togglebuttons, redraw_pixmap() now shows
	  all switched on images. Slight changes to the zoom/translate code
	  (it still doesn't work as intended, though). Added mouse commmands
	  for zooming without scrollwheel. screen.scale no longer goes down
	  to 0 when zooming out.
	* src/draw.h, src/draw.c:
	  Floating point calculations that are converted to ints for
	  display are now rounded to the nearest int rather than always
	  truncated down (or was it up?) Macro round(x) added to make that
	  prettier. Removed minor stuff that caused warnings with -Wall
	  flag to gcc.


2001-11-27 Andreas Andersson (e92_aan@e.kth.se)

	* src/gerbv.c:
	  Added autodetection of file type.
	* src/drill.c:
	  Corrected stupid bug in autodetection.


2001-11-27 Andreas Andersson (e92_aan@e.kth.se)

	* src/drill.h, src/drill.c:
	  Added drill_file_p(); which checks whether a file could
	  be a drill file or not.


2001-11-26 Stefan Petersen (spe@stacken.kth.se)

	* configure.in: Now --data works when running ./configure.
	  A patch from Wojciech Kazubski <wk@ire.pw.edu.pl>


2001-11-26 Andreas Andersson (e92_aan@e.kth.se)

	* src/drill.c:
	  Coordinate parsing now works on coordinates with decimal points.
	  More M codes and some G codes recognized. Most importantly
	  absolute/incremental mode and zero setting could work, though
	  it hasn't been properly tested yet.


2001-11-23 Stefan Petersen (spe@stacken.kth.se)

	* src/gerb_image.h, src/draw.c, src/gerber.c, src/scm_gerber.c:
	  Are now able to parse and display polyogon area fill codes.

	
2001-11-21 Andreas Andersson (e92_aan@e.kth.se)

	* src/drill.c:
	  The format guessing code now guesses right for
	  one more format.
	  More M codes recognized (and later ignored).

	
2001-11-20 Stefan Petersen (spe@stacken.kth.se)

	* src/scm_gerber.c: Backend didn't receive the last
	  entry in the netlist due to bad loop constraint.
	* src/gerber.c: Made sure angles always are positive when
	  calculating multi quadrant ones.
	* src/gerber.c: Improved error detection by checking that
	  all part of an image is there.
	* src/gerber.c: Fix for EagleCad caused other Gerber files
	  to fail. Only D-code 1-3 on a line should also be considered
	  as a change.
	
	
2001-11-15 Stefan Petersen (spe@stacken.kth.se)

	* src/gerbv.c: Tooltips over radio buttons with name
	  of loaded file.

	
-- Release 0.0.5 --	

	
2001-11-14 Stefan Petersen (spe@stacken.kth.se)

	* src/gerbv.c: Changed speed key for zooming in to
	  Alt-O.
	* configure.in: Changed version number for release.
	
	
2001-11-09 Stefan Petersen (spe@stacken.kth.se)

	* src/gerb_image.[hc]: Added.
	* src/drill.[hc], src/gerber.[hc], src/scm_gerber.[hc]:
	  Changed to utilize the new "class", gerb_image.

	
2001-11-07 Stefan Petersen (spe@stacken.kth.se)

	* src/draw.c, src/gerber.c: Implemented multi quadrant arcs.
	  Calculated with a separate function; should be able to be
	  combined with single quadrant calculations. Not properly 
	  tested since I need better examples.
	
	
2001-11-06 Andreas Andersson (e92_aan@e.kth.se)

	* src/drill.h, src/drill.c:
	  parse_drillfile() now ignores unstandard text in headers.
	  Also, it now returns the actual unit used (it used to return
	  the unit of the input file).
	  Minor fixes, mostly moved stuff around.

2001-11-03 Stefan Petersen (spe@stacken.kth.se)

	* src/drill.c, src/scm_gerber.c: Fixed bug causing backend
	  first not to generate aperture list and then barfing when
	  trying.

	
2001-11-03 Stefan Petersen (spe@stacken.kth.se)

	* src/gerbv.c: Added command line -d|--drill support 
	  for drill files both in graphical mode and batch mode.
	  Though are drill file tool/apertures not properly handled
	  by ->scheme converter.
	* man/gerbv.1: Changed man page to reflect the new switches.
	
2001-11-03 Stefan Petersen (spe@stacken.kth.se)

	* src/gerber.[hc]: Cleaned up code after latest hack.
	* src/scm_gerber.c: Changed format of list delivered to
	  the backend; no delta center points. Now it's all calculated
	  center points and angles.
	* scheme/gerb-ps.scm: Accept the new list, but doesn't do anything
	  with it yet.

	
2001-11-03 Stefan Petersen (spe@stacken.kth.se)

	* src/gerber.c: Inserted check for undefined apertures that
	  was earlier removed.

	
2001-11-02 Stefan Petersen (spe@stacken.kth.se)

	* src/gerber.h, src/gerber.c, src/draw.c: Now almost
	  all calculation for circles is done when parsing and
	  not when (re)drawing.
	* src/gerbv.c: Removed two unnecessary defines.
	
	
2001-10-31 Stefan Petersen (spe@stacken.kth.se)

	* src/gerbv.c: Added zooming with scroll wheel on mouse.
	* README: Added info on how to configure XFree86 for scroll mouse.

	
2001-10-28 Stefan Petersen (spe@stacken.kth.se)

	* src/gerber.[hc]: Fixed bug causing parser to reports
	  points with wrong aperture. Pointed out by Dan Christian.
	

2001-10-30 Andreas Andersson (e92_aan@e.kth.se)

	* src/drill.c, src/gerber.h, src/gerber.c
	  Moved new_image() to the correct place

	
2001-10-28 Andreas Andersson (e92_aan@e.kth.se)

	* src/Makefile.am
	  Added drill.c to SOURCES since it seems to work well enough
	  for some testing.
	* src/drill.c
	  Added an input file format guessing function.
	  Some kludges to get around scaling problems.
	* src/gerbv.c
	  Separated File/Open command into File/Open Gerber... and
	  File/Open Drill... Added functions to open drill files.
	* src/*.c:
	  A few speling errors fixed.

	
2001-10-28 Stefan Petersen (spe@stacken.kth.se)

	* src/draw.c, src/gerber.h, src/gerber.c, src/scm_gerber.c:
	  aperture array is now full size and array index is very
	  simple.
	

2001-10-27 Stefan Petersen (spe@stacken.kth.se)

	* src/*.[ch]: typedef:ed all internal structs to *_t
	

-- Release 0.0.4 --	
	
2001-10-27 Stefan Petersen (spe@stacken.kth.se)

	* src/gerber.[hc]: EagleCad generates broken Gerber.
	  I kindly detect and then tries to run as nothing 
	  happened. Disable kludge with commenting out 
	  EAGLECAD_KLUDGE in src/gerber.h.
	  This was pointed out to me by Dan Christian and
	  later confirmed by Fredrik Jonsson sent me some
	  examples. Thanks guys!
	* AUTHORS/CONTRIBUTORS: Added latest bunch of contributing
	  people.
	* configure.in: Updated version to 0.0.4 before release.
	
	
2001-10-24 Stefan Petersen (spe@stacken.kth.se)

	* src/draw.[hc]: Added. Extracted drawing functions from
	  gerbv.c.
	* src/gerbv.c: Removed add drawing functions into draw.c.
	  Also minor clean ups. Fixed #def's of Guile support.
	* src/Makefile.am: Added draw.c as src file.
	
	
2001-10-22 Stefan Petersen (spe@stacken.kth.se)

	* example/*: Cleaned out numpres.pcb.* to a separate dir
	  and added a example received from Joachim Jansen on
	  separate aperture files.

	
2001-10-21 Stefan Petersen (spe@stacken.kth.se)

	* gerbv.c: Changed how cw and ccw is handled when drawing
	  arcs to avoid swapping of start and stop points.
	* gerbv.c: Red dots at "aperture macros wanna-be's" scale
	  with ordinary scale, so they don't disappear when scaling
	  around.

	
2001-10-09 Stefan Petersen (spe@stacken.kth.se)

	* gerber.h, gerber.c: Added 'D' as possible Format
	  Statement after patches from Uwe Bonnes
	  <bon@elektron.ikp.physik.tu-darmstadt.de>. Thanks!
	* scm_gerber.c: Broke out omit_zeros_t to scm type
	  conversion and added 'explicit to this type.

	
2001-09-03 Stefan Petersen (spe@stacken.kth.se)

	* configure.in: fixed bug when testing for opt_backend_dir
	  causing configure to fail at least on Solaris.
	* INSTALL: updated with info now that automake's in use.

	
2001-09-02 Stefan Petersen (spe@stacken.kth.se)

	* build-release, rebuild-conf: missing files when running
	  automake are now copied instead of linked. Thanks
	  Dan <mcmahill@mtl.mit.edu> for reporting this.

	
2001-08-31 Stefan Petersen (spe@stacken.kth.se)

	* Splitted AUTHORS to AUTHORS and CONTRIBUTORS
	* src/gerb-ps.scm: removed 
	* build_release uses anonymous cvs from sourceforge
	  to build the release.
	* src/scm_gerber.c, src/gerbv.c:
	  Now the scheme backend receives the name of the parsed file
	* scheme/gerb-ps.scm: Utilizes the above feature by creating output
	  filename by prepending input filename with ".ps"
	
