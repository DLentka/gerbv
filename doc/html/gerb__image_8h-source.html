<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>gerbv: src/gerb_image.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.8-20040928 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">src</a></div>
<h1>gerb_image.h</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment"> * gEDA - GNU Electronic Design Automation</span>
00003 <span class="comment"> * This files is a part of gerbv.</span>
00004 <span class="comment"> *</span>
00005 <span class="comment"> *   Copyright (C) 2000-2001 Stefan Petersen (spe@stacken.kth.se)</span>
00006 <span class="comment"> *</span>
00007 <span class="comment"> * $Id$</span>
00008 <span class="comment"> *</span>
00009 <span class="comment"> * This program is free software; you can redistribute it and/or modify</span>
00010 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
00011 <span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span>
00012 <span class="comment"> * (at your option) any later version.</span>
00013 <span class="comment"> *</span>
00014 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
00015 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00016 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00017 <span class="comment"> * GNU General Public License for more details.</span>
00018 <span class="comment"> *</span>
00019 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
00020 <span class="comment"> * along with this program; if not, write to the Free Software</span>
00021 <span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111 USA</span>
00022 <span class="comment"> */</span>
00023 
00024 <span class="preprocessor">#ifndef GERB_IMAGE_H</span>
00025 <span class="preprocessor"></span><span class="preprocessor">#define GERB_IMAGE_H</span>
00026 <span class="preprocessor"></span>
00027 <span class="preprocessor">#include "amacro.h"</span>
00028 <span class="preprocessor">#include "gerb_transf.h"</span>
00029 
00030 <span class="preprocessor">#ifdef __cplusplus</span>
00031 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
00032 <span class="preprocessor">#endif</span>
00033 <span class="preprocessor"></span>
00034        
00035 <span class="preprocessor">#define APERTURE_MIN 10</span>
00036 <span class="preprocessor"></span><span class="preprocessor">#define APERTURE_MAX 999</span>
00037 <span class="preprocessor"></span>       
00038 <span class="keyword">enum</span> aperture_state_t {OFF, ON, FLASH};
00039 <span class="keyword">enum</span> aperture_t {CIRCLE, RECTANGLE, OVAL, POLYGON, MACRO};
00040 <span class="keyword">enum</span> unit_t {INCH, MM};
00041 <span class="keyword">enum</span> polarity_t {POSITIVE, NEGATIVE, DARK, CLEAR};
00042 <span class="keyword">enum</span> omit_zeros_t {LEADING, TRAILING, EXPLICIT};
00043 <span class="keyword">enum</span> coordinate_t {ABSOLUTE, INCREMENTAL};
00044 <span class="keyword">enum</span> interpolation_t {LINEARx1, LINEARx10, LINEARx01, LINEARx001, 
00045                     CW_CIRCULAR, CCW_CIRCULAR, PAREA_START, PAREA_END};
00046 <span class="keyword">enum</span> encoding_t {NONE, ASCII, EBCDIC, BCD, ISO_ASCII, EIA };
00047 
00048 
00049 <span class="keyword">typedef</span> <span class="keyword">struct </span>gerb_cirseg {
00050     <span class="keywordtype">double</span> cp_x;
00051     <span class="keywordtype">double</span> cp_y;
00052     <span class="keywordtype">double</span> width;  <span class="comment">/* of oval */</span>
00053     <span class="keywordtype">double</span> height; <span class="comment">/* of oval */</span>
00054     <span class="keywordtype">double</span> angle1;
00055     <span class="keywordtype">double</span> angle2;
00056 } gerb_cirseg_t;
00057 
00058 
00059 <span class="keyword">typedef</span> <span class="keyword">struct </span>gerb_net {
00060     <span class="keywordtype">double</span> start_x;
00061     <span class="keywordtype">double</span> start_y;
00062     <span class="keywordtype">double</span> stop_x;
00063     <span class="keywordtype">double</span> stop_y;
00064     <span class="keywordtype">int</span> aperture;
00065     <span class="keyword">enum</span> polarity_t layer_polarity; 
00066     <span class="keyword">enum</span> aperture_state_t aperture_state;
00067     <span class="keyword">enum</span> interpolation_t interpolation;
00068     <span class="keyword">enum</span> unit_t unit;
00069     <span class="keywordtype">int</span> nuf_pcorners; <span class="comment">/* If interpolation=PAREA_START, corners in polygon */</span>
00070     <span class="keyword">struct </span>gerb_cirseg *cirseg;
00071     <span class="keyword">struct </span>gerb_net *next;
00072 } gerb_net_t;
00073 
00074 
00075 <span class="keyword">typedef</span> <span class="keyword">struct </span>gerb_aperture {
00076     <span class="keyword">enum</span> aperture_t type;
00077     amacro_t *amacro;
00078     <span class="keywordtype">double</span> parameter[5];
00079     <span class="keywordtype">int</span> nuf_parameters;
00080     <span class="keyword">enum</span> unit_t unit;
00081 } gerb_aperture_t;
00082 
00083 
00084 <span class="keyword">typedef</span> <span class="keyword">struct </span>gerb_format {
00085     <span class="keyword">enum</span> omit_zeros_t omit_zeros;
00086     <span class="keyword">enum</span> coordinate_t coordinate;
00087     <span class="keywordtype">int</span> x_int;
00088     <span class="keywordtype">int</span> x_dec;
00089     <span class="keywordtype">int</span> y_int;
00090     <span class="keywordtype">int</span> y_dec;
00091     <span class="keywordtype">int</span> lim_seqno; <span class="comment">/* Length limit for codes of sequence number */</span>
00092     <span class="keywordtype">int</span> lim_gf;    <span class="comment">/* Length limit for codes of general function */</span>
00093     <span class="keywordtype">int</span> lim_pf;    <span class="comment">/* Length limit for codes of plot function */</span>
00094     <span class="keywordtype">int</span> lim_mf;    <span class="comment">/* Length limit for codes of miscellaneous function */</span>
00095 } gerb_format_t;
00096        
00097        
00098 <span class="keyword">typedef</span> <span class="keyword">struct </span>gerb_image_info {
00099     <span class="keywordtype">char</span> *name;
00100     <span class="keyword">enum</span> polarity_t polarity;
00101     <span class="keywordtype">double</span> min_x; <span class="comment">/* Always in inches */</span>
00102     <span class="keywordtype">double</span> min_y;
00103     <span class="keywordtype">double</span> max_x;
00104     <span class="keywordtype">double</span> max_y;
00105     <span class="keywordtype">double</span> offset_a;
00106     <span class="keywordtype">double</span> offset_b;
00107     <span class="keyword">enum</span> encoding_t encoding;
00108     <span class="keywordtype">double</span> scale_factor_A;  <span class="comment">/* SF parameters */</span>
00109     <span class="keywordtype">double</span> scale_factor_B;
00110     <span class="keyword">struct </span>{                <span class="comment">/* SR parameters */</span>
00111        <span class="keywordtype">int</span> X;
00112        <span class="keywordtype">int</span> Y;
00113        <span class="keywordtype">double</span> dist_X;
00114        <span class="keywordtype">double</span> dist_Y;
00115     } step_and_repeat;
00116 } gerb_image_info_t;
00117 
00118 
00119 <span class="keyword">typedef</span> <span class="keyword">struct </span>gerb_image {
00120     gerb_aperture_t *aperture[APERTURE_MAX];
00121     amacro_t *amacro;
00122     gerb_format_t *format;
00123     gerb_image_info_t *info;
00124     gerb_net_t *netlist;
00125     <a class="code" href="structgerb__transf.html">gerb_transf_t</a> *transf;
00126 } gerb_image_t;
00127 
00128 
00129 <span class="comment">/*</span>
00130 <span class="comment"> * Function prototypes</span>
00131 <span class="comment"> */</span>
00132 gerb_image_t *new_gerb_image(gerb_image_t *image);
00133 <span class="keywordtype">void</span> free_gerb_image(gerb_image_t *image);
00134 
00135 <span class="comment">/*</span>
00136 <span class="comment"> * Check that the parsed gerber image is complete.</span>
00137 <span class="comment"> * Returned errorcodes are:</span>
00138 <span class="comment"> * 0: No problems</span>
00139 <span class="comment"> * 1: Missing netlist</span>
00140 <span class="comment"> * 2: Missing format</span>
00141 <span class="comment"> * 4: Missing apertures</span>
00142 <span class="comment"> * 8: Missing info</span>
00143 <span class="comment"> * It could be any of above or'ed together</span>
00144 <span class="comment"> */</span>
00145 <span class="keyword">typedef</span> <span class="keyword">enum</span> { 
00146     GERB_IMAGE_OK = 0,
00147     GERB_IMAGE_MISSING_NETLIST = 1,
00148     GERB_IMAGE_MISSING_FORMAT = 2, 
00149     GERB_IMAGE_MISSING_APERTURES = 4,
00150     GERB_IMAGE_MISSING_INFO = 8,
00151 } gerb_verify_error_t;
00152 
00153 gerb_verify_error_t gerb_image_verify(gerb_image_t *image);
00154 
00155 <span class="comment">/* Dumps a written version of image to stdout */</span>
00156 <span class="keywordtype">void</span> gerb_image_dump(gerb_image_t *image);
00157 
00158 <span class="preprocessor">#ifdef __cplusplus</span>
00159 <span class="preprocessor"></span>}
00160 <span class="preprocessor">#endif</span>
00161 <span class="preprocessor"></span>
00162 <span class="preprocessor">#endif </span><span class="comment">/* GERB_IMAGE_H */</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Oct 13 16:09:18 2004 for gerbv by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.8-20040928 </small></address>
</body>
</html>
